<!-- mypage.html -->
{% extends "layouts/base.html" %} {% block content %}
<style>
  .left-section {
    height: 100vh; /* 사이드바 길이를 늘림 */
  }
  .left-section h3 {
    font-size: 2.5em; /* 사용자명 글씨 크기 */
    margin-bottom: 100px; /* h3와 ul 사이의 간격을 조정 */
  }
  .left-section ul {
    list-style-type: none;
    padding: 0;
  }
  .left-section ul li {
    font-size: 1.5em; /* 목록 글씨 크기 */
    margin-bottom: 50px; /* 목록 사이의 간격 */
  }
  input[type="text"],
  input[type="password"],
  input[type="email"],
  input[type="tel"] {
    width: 60%; /* 폼의 너비 */
    height: 40px; /* 폼의 높이 */
  }
  .row {
    margin-bottom: 40px; /* 각 행의 아래쪽에 마진을 추가 */
  }
  h2 {
    margin-bottom: 50px; /* '계정 설정' 텍스트와 아래 항목들 사이의 간격을 넓힘 */
  }
  .menu-selected{
    color: blue;
  }
  .cancel-account-btn:hover{
    background-color:hsl(0, 58%, 52%);
  }
</style>
<div class="container-fluid">
  <div class="row">
    <!-- Left Sidebar -->
    <div class="left-section col-2 p-4 mb-3 text-secondary shadow text-center">
      <div class="mb-5 p-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
          <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
          <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
        </svg>
        <h4 class="mt-3 mb-5">{{ user.username }} 님</h4>
      </div>
      <div class="mb-5 p-3">
        <ul style="font-family: 'Noto Sans KR', sans-serif;">
          <li><a href="{{ url_for('mypage.scrap_list') }}">스크랩 목록</a></li>
          <li><a href="{{ url_for('mypage.update_user_info', user_id=user.user_id) }}" id="show_account_settings" class="menu-selected">계정 설정</a></li>
        </ul>
      </div>
    </div>

    <!-- Right Content -->
    <div id="right-content" class="right-section col-10 p-5">
      <!-- Account Settings Form (Initially hidden) -->
      <h2>계정 설정</h2>
      <div id="account-settings-form w-75">
        <form
          method="POST"
          action="{{ url_for('mypage.update_user_info', user_id=user.user_id) }}"
        >
          <!-- CSRF 토큰 필드 추가 -->
          {{ form.csrf_token() }}

          <div class="row text-left">
            <!-- 첫 번째 행 -->
            <div class="col">
              <label for="username">사용자명</label>
              {{ form.username(class='form-control', id='username',
              disabled=true) }}
            </div>
            <div class="col">
              <label for="user_id">ID</label>
              {{ form.user_id(class='form-control', id='user_id', disabled=true)
              }}
            </div>
          </div>

          <!-- 두 번째 행 -->
          <div class="row text-left">
            <div class="col">
              <label for="user_pw1">새로운 비밀번호</label>
              {{ form.user_pw1(class='form-control', id='user_pw1') }}
            </div>
            <div class="col">
              <label for="email">Email</label>
              {{ form.email(class='form-control', id='email') }}
            </div>
          </div>

          <!-- 세 번째 행 -->
          <div class="row text-left">
            <div class="col">
              <label for="user_pw2">새로운 비밀번호 확인</label>
              {{ form.user_pw2(class='form-control', id='user_pw2') }}
            </div>
            <div class="col">
              <label for="phone">Phone</label>
              {{ form.phone(class='form-control', id='phone') }}
            </div>
          </div>

          <!-- 네 번째 행 -->
          <div class="row text-left">
            <div class="col">
              <label for="address">Address</label>
              {{ form.address(class='form-control', id='address') }}
            </div>
            <div class="col"></div>
          </div>

          <div class="row text-center">
            <div class="col">
              <button type="submit" class="btn mx-3" style="color: white; background-color:hsl(240, 100%, 70%)">회원정보수정</button>
              <a href="{{ url_for('auth.delete_account') }}" type="submit" class="btn btn-secondary mx-3 cancel-account-btn">회원 탈퇴</a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script>
  // 계정 설정을 클릭했을 때 폼을 표시합니다.
  document
    .getElementById("show_account_settings")
    .addEventListener("click", function () {
      document.getElementById("account-settings-form").style.display = "block";
    });
</script>
{% endblock %}
